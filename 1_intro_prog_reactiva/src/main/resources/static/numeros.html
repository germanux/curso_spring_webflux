<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Cliente Reactivo para servidor WebFlux Numeros Rest Controller</title>
</head>
<body>
	<h1>Cliente Reactivo para servidor WebFlux Numeros Rest Controller</h1>
	<ul id="ul_eventos"></ul>
<script type="text/javascript">
	// Cuando recibimos un texto, lo añadimos a la lista <UL>
	function add(mensaje) {
		const elem = document.createElement("li");
		elem.innerHTML = mensaje;
		document.getElementById("ul_eventos").appendChild(elem);
	}
	// Conectar al servidor y mediante el objeto EventSource, recoger todo tipo de eventos
	var fuenteEventos = new EventSource("/numeros");
	// Capturar el evento al conectarse: onopen
	fuenteEventos.onopen =   e => add("Conexión abierta");
	fuenteEventos.onerror =   e => add("Conexión cerrada");
	
	fuenteEventos.onmessage = ( e ) => {
		add("Números: " + e.data);
	}
</script>
</body>
</html>







